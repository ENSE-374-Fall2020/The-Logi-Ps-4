<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="css/navBarStyle.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/e9a8538c89.js" crossorigin="anonymous"></script>


    <title>Exercises</title>
</head>

<body>

    <%- include("partials/navbar", {username: username}); -%>

    <h1 class="title"> Exercises </h1>

    <section id="mainButtons" class="d-flex flex-wrap justify-content-around">

        <article>
            <form method="GET" action="/workouts">
                <button type="submit" id="buttonBrowseWorkouts" class="mainButton">
                    <div class="innerButton">
                        <p>
                            <i class="fas fa-search"></i>
                            <b>Browse Community Workouts</b>
                        </p>
                        <p>
                            See workouts others in the community have created
                        </p>
                    </div>
                </button>
            </form>
        </article>

        <article>
            <form method="GET" action="/workoutBuilder">
                <button type="submit" id="buttonCreateWorkout" class="mainButton">
                    <article>
                        <div class="innerButton">
                            <p>
                                <i class="fas fa-dumbbell"></i>
                                <b>Create New Workout</b>
                            </p>
                            <p>
                                Build a workout from scratch
                            </p>
                        </div>
                </button>
            </form>
        </article>

        <article>
            <form method="GET" action="/landing">
                <button type="submit" id="buttonYourWorkouts" class="mainButton">
                    <div class="innerButton">
                        <p>
                            <i class="fas fa-search"></i>
                            <b>View Your Workouts</b>
                        </p>
                        <p>
                            See workouts in your personal list
                        </p>
                    </div>
                </button>
            </form>
        </article>
    </section>



    <!-- Container for whole page -->
    <div class="container-fluid">
        <div class="row d-flex justify-content-around">
            <p class="alert alert-primary d-none d-md-block">Use the list on the left to find exercises by bodypart.</p>
            <p class="alert alert-info">Hover over an exercise card to see it's targeted muscles.</p>
        </div>
        <div class="row">
            <!-- Left-side list of all exercises -->

            <section id="exerciseSideList" class="col w-100 bg-light p-0">
                <div class="accordion">
                    <article class="card">
                        <div id="sideListLegsHeader" class="card-header">
                            <button class="btn btn-link w-100" type="button" data-toggle="collapse"
                                data-target="#sideListLegsBody" aria-expanded="true" aria-controls="sideListLegsBody">
                                <h5>Legs</h5>
                            </button>
                        </div>
                        <!-- idea: 
    comment: I realize this is not the most efficient way of doing this (loop needs to repeat each time -> lots of repeated work) but I'm not sure how to do it otherwise
    1. passed in the array of exercises from the db
    2. loop through the exercises bodyParts (bpNumber is short for bodyPartNumber)
    3. if (ex) legs is in bodyParts array, show exercise name in legs side list (vice versa for all bodyParts)

    * the side list exercises are linked to their card by exercise id
-->

                        <div id="sideListLegsBody" class="collapse" aria-labelledby="sideListLegsHeader"
                            data-parent="#exerciseSideList">
                            <div class="card-body list-group">
                                <% for (var exerciseNumber = 0; exerciseNumber < exercises.length; exerciseNumber++) { 
                                for (var bpNumber = 0; bpNumber < exercises[exerciseNumber].bodyParts.length; bpNumber++) { 
                                    if (exercises[exerciseNumber].bodyParts[bpNumber] === "Legs") { %>
                                <a class="list-group-item"
                                    href="#<%=exercises[exerciseNumber].name%>"><%=exercises[exerciseNumber].name%></a>
                                <% } 
                                } 
                            } %>
                            </div>
                        </div>
                    </article>

                    <article class="card">
                        <div id="sideListArmsHeader" class="card-header">

                            <button class="btn btn-link w-100" type="button" data-toggle="collapse"
                                data-target="#sideListArmsBody" aria-expanded="true" aria-controls="sideListArmsBody">
                                <h5>Arms</h5>
                            </button>

                        </div>

                        <div id="sideListArmsBody" class="collapse" aria-labelledby="sideListArmsHeader"
                            data-parent="#exerciseSideList">
                            <div class="card-body list-group">
                                <% for (var exerciseNumber = 0; exerciseNumber < exercises.length; exerciseNumber++) { %>
                                <% for (var bpNumber = 0; bpNumber < exercises[exerciseNumber].bodyParts.length; bpNumber++) { %>
                                <% if (exercises[exerciseNumber].bodyParts[bpNumber] === "Arms") { %>
                                <a class="list-group-item"
                                    href="#<%=exercises[exerciseNumber].name%>"><%=exercises[exerciseNumber].name%></a>
                                <% } %>
                                <% } %>
                                <% } %>
                            </div>
                        </div>
                    </article>

                    <article class="card">
                        <div id="sideListStomachHeader" class="card-header">
                            <button class="btn btn-link w-100" type="button" data-toggle="collapse"
                                data-target="#sideListStomachBody" aria-expanded="true"
                                aria-controls="sideListStomachBody">
                                <h5>Stomach</h5>
                            </button>
                        </div>
                        <div id="sideListStomachBody" class="collapse" aria-labelledby="sideListStomachHeader"
                            data-parent="#exerciseSideList">
                            <div class="card-body list-group">
                                <% for (var exerciseNumber = 0; exerciseNumber < exercises.length; exerciseNumber++) { %>
                                <% for (var bpNumber = 0; bpNumber < exercises[exerciseNumber].bodyParts.length; bpNumber++) { %>
                                <% if (exercises[exerciseNumber].bodyParts[bpNumber] === "Stomach") { %>
                                <a class="list-group-item"
                                    href="#<%=exercises[exerciseNumber].name%>"><%=exercises[exerciseNumber].name%></a>
                                <% } %>
                                <% } %>
                                <% } %>
                            </div>
                        </div>
                    </article>

                    <article class="card">
                        <div id="sideListBackHeader" class="card-header">
                            <button class="btn btn-link w-100" type="button" data-toggle="collapse"
                                data-target="#sideListBackBody" aria-expanded="true" aria-controls="sideListBackBody">
                                <h5>Back</h5>
                            </button>
                        </div>
                        <div id="sideListBackBody" class="collapse" aria-labelledby="sideListBackHeader"
                            data-parent="#exerciseSideList">
                            <div class="card-body list-group">
                                <% for (var exerciseNumber = 0; exerciseNumber < exercises.length; exerciseNumber++) { %>
                                <% for (var bpNumber = 0; bpNumber < exercises[exerciseNumber].bodyParts.length; bpNumber++) { %>
                                <% if (exercises[exerciseNumber].bodyParts[bpNumber] === "Back") { %>
                                <a class="list-group-item"
                                    href="#<%=exercises[exerciseNumber].name%>"><%=exercises[exerciseNumber].name%></a>
                                <% } %>
                                <% } %>
                                <% } %>
                            </div>
                        </div>
                    </article>

                    <article class="card">
                        <div id="sideListShouldersHeader" class="card-header">
                            <button class="btn btn-link w-100" type="button" data-toggle="collapse"
                                data-target="#sideListShouldersBody" aria-expanded="true"
                                aria-controls="sideListShouldersBody">
                                <h5>Shoulders</h5>
                            </button>
                        </div>
                        <div id="sideListShouldersBody" class="collapse" aria-labelledby="sideListShouldersHeader"
                            data-parent="#exerciseSideList">
                            <div class="card-body list-group">
                                <% for (var exerciseNumber = 0; exerciseNumber < exercises.length; exerciseNumber++) { %>
                                <% for (var bpNumber = 0; bpNumber < exercises[exerciseNumber].bodyParts.length; bpNumber++) { %>
                                <% if (exercises[exerciseNumber].bodyParts[bpNumber] === "Shoulders") { %>
                                <a class="list-group-item"
                                    href="#<%=exercises[exerciseNumber].name%>"><%=exercises[exerciseNumber].name%></a>
                                <% } %>
                                <% } %>
                                <% } %>
                            </div>
                        </div>
                    </article>

                    <article class="card">
                        <div id="sideListChestHeader" class="card-header">
                            <button class="btn btn-link w-100" type="button" data-toggle="collapse"
                                data-target="#sideListChestBody" aria-expanded="true" aria-controls="sideListChestBody">
                                <h5>Chest</h5>
                            </button>
                        </div>
                        <div id="sideListChestBody" class="collapse" aria-labelledby="sideListChestHeader"
                            data-parent="#exerciseSideList">
                            <div class="card-body list-group">
                                <% for (var exerciseNumber = 0; exerciseNumber < exercises.length; exerciseNumber++) { %>
                                <% for (var bpNumber = 0; bpNumber < exercises[exerciseNumber].bodyParts.length; bpNumber++) { %>
                                <% if (exercises[exerciseNumber].bodyParts[bpNumber] === "Chest") { %>
                                <a class="list-group-item"
                                    href="#<%=exercises[exerciseNumber].name%>"><%=exercises[exerciseNumber].name%></a>
                                <% } %>
                                <% } %>
                                <% } %>
                            </div>
                        </div>
                    </article>

                    <article class="card">
                        <div id="sideListCardioHeader" class="card-header">
                            <button class="btn btn-link w-100" type="button" data-toggle="collapse"
                                data-target="#sideListCardioBody" aria-expanded="true"
                                aria-controls="sideListCardioBody">
                                <h5>Cardio</h5>
                            </button>
                        </div>
                        <div id="sideListCardioBody" class="collapse" aria-labelledby="sideListCardioHeader"
                            data-parent="#exerciseSideList">
                            <div class="card-body list-group">
                                <% for (var exerciseNumber = 0; exerciseNumber < exercises.length; exerciseNumber++) { %>
                                <% for (var bpNumber = 0; bpNumber < exercises[exerciseNumber].bodyParts.length; bpNumber++) { %>
                                <% if (exercises[exerciseNumber].bodyParts[bpNumber] === "Cardio") { %>
                                <a class="list-group-item"
                                    href="#<%=exercises[exerciseNumber].name%>"><%=exercises[exerciseNumber].name%></a>
                                <% } %>
                                <% } %>
                                <% } %>
                            </div>
                        </div>
                    </article>
                </div>
            </section>


            <!-- End of side list section -->
            <!-- Container for all exercise cards -->

            <section id="exerciseCardList" class="col">
                <div class="d-flex flex-wrap justify-content-around">
                    <% for (let exercise of exercises) {
                // include ("partials/exerciseCard.ejs", {exercise: exercise});
                %>
                    <article id="<%=exercise.name%>" class=" exerciseCard flip-card align-self-start m-1">

                        <div class="flip-card-inner">
                            <div class="bg-light flip-card-front">
                                <h4 class="card-title bg-primary text-light text-center p-2 m-2"><%=exercise.name%></h4>
                                <img class="img-fluid p-2" src="<%=exercise.imagePath%>" width="240px" height="240px"
                                    alt="Card image cap" />
                            </div>
                            <div class="bg-muted flip-card-back">
                                <h4 class="card-title text-light text-center p-2 m-2">Targeted Muscles</h4>
                                <div class="card-body text-dark">
                                    <ul class="list-group">
                                        <% for (let muscle of exercise.muscles) { %>
                                        <li class="list-group-item p-1 text-capitalize"><%=muscle%></li>
                                        <% } %>

                                    </ul>
                                </div>
                            </div>
                        </div>
                    </article>
                    <% } %>
                </div>
            </section>
        </div>
    </div>




    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
        crossorigin="anonymous"></script>

</body>

</html>